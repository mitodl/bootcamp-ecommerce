{% load wagtailcore_tags image_version_url %}
<div id="faculty-block" class="instructor-block">
  {% for section in page.sections %}
  <div class="container">
    <h2><b>{{ section.value.heading }}</b></h2>
    <hr>
    {% if section.value.subhead %}
      <h5 class="subheading">{{ section.value.subhead }}</h5>
    {% endif %}
    <div class="slider slider-{{ forloop.counter }}">
      {% for member in section.value.members %}
        <div class="slide instructor">
          <div class="slide-holder">
            <img src="{% image_version_url member.value.image "fill-300x300" %}" alt="{{ member.value.name }}">
            <h5>{{ member.value.name }}</h5>
            <div class="text-holder">
              {{ member.value.title }}
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
  {% endfor %}
</div>
<script>
var totalSections = {{ page.sections|length }};

for(i=1 ; i <= totalSections; i++){
  const numFacultySlides = $(`.slider-1 .slide`).length;

  $(`.slider-${i}`).slick({
    rows:           0,
    slidesToShow:   3,
    slidesToScroll: 1,
    dots:           numFacultySlides > 3,
    infinite:       false,
    autoplay:       false,
    responsive:     [
      {
        breakpoint: 1024,
        settings:   {
          slidesToShow:   3,
          slidesToScroll: 3,
          dots:           numFacultySlides > 3
        }
      },
      {
        breakpoint: 992,
        settings:   {
          slidesToShow:   2,
          slidesToScroll: 1,
          dots:           numFacultySlides > 2
        }
      },
      {
        breakpoint: 767,
        settings:   {
          slidesToShow:   1,
          slidesToScroll: 1,
          dots:           numFacultySlides > 1
        }
      }
    ]
  });
}
</script>
